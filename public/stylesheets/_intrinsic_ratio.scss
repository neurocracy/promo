// -----------------------------------------------------------------------------
//   Intrinsic ratio partial
// -----------------------------------------------------------------------------

///
/// Disable an intrinsic ratio wrapper, removing the ratio behaviour.
///
@mixin disable-intrinsic-ratio {
  .intrinsic-ratio {
    &__ratio {
      height: auto;

      padding-top: 0 !important;
    }
    &__content,
    a {
      position: relative;

      width:  auto;
      height: auto;
    }
  }
}

///
/// Disable the inline max-width set on intrinsic ratio wrappers and links.
///
/// @param {String} $self [true]
///   Whether to also disable max-width on the & selector, which is useful in
///   the case of links containing an intrinsic ratio wrapper, which require a
///   max-width to avoid phantom clickable space. Defaults to true.
///
@mixin disable-intrinsic-ratio-max-width($self: true) {
  .intrinsic-ratio {
    max-width: none !important;
  }

  @if ($self == true) {
    & {
      max-width: none !important;
    }
  }
}

.intrinsic-ratio {
  &__ratio {
    // Override the inline display: inline, which hides the inline padding-
    // top if stylesheets fail to load or during printing.
    display:  block !important;

    position: relative;

    height: 0;

    // 'padding-top' is defined inline with the appropriate proportion.
  }

  // Target both content and any links, as sometimes links are wrapped around
  // the content, e.g. image, which can cause the image to collapse to zero
  // height if we don't do this.
  &__content,
  a {
    position: absolute;

    top:  0;
    left: 0;

    // Use these rather than bottom/right, as that can have odd effects on
    // Adminimal (and possibly other themes).
    width:  100%;
    height: 100%;
  }
}
